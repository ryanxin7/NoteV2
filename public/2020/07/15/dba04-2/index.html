

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.ico">
  <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#01393E">
  <meta name="description" content="">
  <meta name="author" content="Ryan">
  <meta name="keywords" content="">
  <meta name="description" content="索引原理介绍创建与执行计划分析[[toc]] 1.索引的作用类似书的目录,起到优化查询的作用 2. 索引的分类(算法) B树  默认使用的索引类型  R树 基本不用  Hash 自适应 自动优化不需要设置  FullText  全文索引 类似ES数据库  GIS 索引 5.7版本 用于存储地理位置信息   3. BTREE索引算法演变3.1 顺序查找法顺序查找，顾名思义，就是从头到尾遍历的查找，直">
<meta property="og:type" content="article">
<meta property="og:title" content="索引原理介绍创建与执行计划分析">
<meta property="og:url" content="http://example.com/2020/07/15/dba04-2/index.html">
<meta property="og:site_name" content="Ryan&#39;s Notebook">
<meta property="og:description" content="索引原理介绍创建与执行计划分析[[toc]] 1.索引的作用类似书的目录,起到优化查询的作用 2. 索引的分类(算法) B树  默认使用的索引类型  R树 基本不用  Hash 自适应 自动优化不需要设置  FullText  全文索引 类似ES数据库  GIS 索引 5.7版本 用于存储地理位置信息   3. BTREE索引算法演变3.1 顺序查找法顺序查找，顾名思义，就是从头到尾遍历的查找，直">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-10.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-11.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-12.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-13.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-14.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-15.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-16.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-17.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-18.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-19.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-20.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-21.png">
<meta property="og:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-22.png">
<meta property="article:published_time" content="2020-07-15T05:13:01.000Z">
<meta property="article:modified_time" content="2021-11-15T01:51:42.443Z">
<meta property="article:author" content="Ryan">
<meta property="article:tag" content="DBA">
<meta property="article:tag" content="RDBMS">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-10.png">
  
  <title>索引原理介绍创建与执行计划分析 - Ryan&#39;s Notebook</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Ryan&#39;s Notebook</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="索引原理介绍创建与执行计划分析">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-07-15 13:13" pubdate>
        2020年7月15日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      6.6k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      21 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">索引原理介绍创建与执行计划分析</h1>
            
            <div class="markdown-body">
              <h1 id="索引原理介绍创建与执行计划分析"><a href="#索引原理介绍创建与执行计划分析" class="headerlink" title="索引原理介绍创建与执行计划分析"></a>索引原理介绍创建与执行计划分析</h1><p>[[toc]]</p>
<h2 id="1-索引的作用"><a href="#1-索引的作用" class="headerlink" title="1.索引的作用"></a>1.索引的作用</h2><p>类似书的目录,起到优化查询的作用</p>
<h2 id="2-索引的分类-算法"><a href="#2-索引的分类-算法" class="headerlink" title="2. 索引的分类(算法)"></a><strong>2.</strong> 索引的分类(算法)</h2><ul>
<li><p>B树  默认使用的索引类型</p>
</li>
<li><p>R树 基本不用</p>
</li>
<li><p>Hash 自适应 自动优化不需要设置</p>
</li>
<li><p>FullText  全文索引 类似ES数据库</p>
</li>
<li><p>GIS 索引 5.7版本 用于存储地理位置信息</p>
</li>
</ul>
<h2 id="3-BTREE索引算法演变"><a href="#3-BTREE索引算法演变" class="headerlink" title="3. BTREE索引算法演变"></a>3. BTREE索引算法演变</h2><h3 id="3-1-顺序查找法"><a href="#3-1-顺序查找法" class="headerlink" title="3.1 顺序查找法"></a>3.1 顺序查找法</h3><p>顺序查找，顾名思义，就是从头到尾遍历的查找，直到找到要找的元素x为止，所以这种方法对于有n个元素的线性表而言，在最坏情况下需要n次比较。</p>
<h3 id="3-2-二分查找法"><a href="#3-2-二分查找法" class="headerlink" title="3.2 二分查找法"></a>3.2 二分查找法</h3><p>使用二分查找法的前提是要查找的序列是已经排序好的，所以若序列不是顺序的，应先对其进行排序，或者从小到大，或者从大到小。这种方法的特点是无论怎样查找，每次都只是在一半的数据中查找。</p>
<h3 id="3-3-二叉排序树查找"><a href="#3-3-二叉排序树查找" class="headerlink" title="3.3 二叉排序树查找"></a>3.3 二叉排序树查找</h3><p>二叉树是一种很有用的非线性结构。在二叉树中，每一个结点的度最大为2，二叉树中的每个结点的子树被分为左子树和右子树。在二叉树中，一个结点可以只有左子树而没有右子树，也可以只有右子树而没有左子树。当一个结点既没有左子树也没有右子树时，该结点即为叶子结点。</p>
<h3 id="3-4-平衡二叉树"><a href="#3-4-平衡二叉树" class="headerlink" title="3.4 平衡二叉树"></a>3.4 平衡二叉树</h3><p>平衡二叉树 是在 二叉树上 进一步限制,在向树种添加节点时,牺牲一定的时间和空间,通过若干次旋转,达到一定的平衡;以提高查询的性能。</p>
<h3 id="3-5-Btree"><a href="#3-5-Btree" class="headerlink" title="3.5 Btree"></a>3.5 Btree</h3><p>英文名字叫做B-tree，中间的短线是英文连接符，只是翻译的时候将短线翻译成了减号。<strong>全称Balance-tree(平衡多路查找树)<strong>，</strong>平衡</strong>的意思是左边和右边分布均匀。<strong>多路</strong>的意思是相对于二叉树而言的，二叉树就是二路查找树，查找时只有两条路，而B-tree有多条路，即父节点有多个子节点。使用B-tree结构可以<strong>显著减少定位</strong>记录时所经历的中间<strong>过程</strong>，从而加快存取速度。这个数据结构一般用于<strong>数据库的索引</strong>，综合效率较高。</p>
<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-10.png" srcset="/img/loading.gif" lazyload alt="Btree "></p>
<p>:::tip Btree 演变</p>
<p><strong>b-树</strong> 上层节点保存的下层节点的最小值。</p>
<p><strong>b+树</strong> （ 对范围查询优化） 有可能在相邻的叶子节点 ，查询完第一个叶子节点直接查询相邻的叶子节点避免了重新遍历根节点省去IO资源。</p>
<p><strong>b*树</strong> 在普通b数上增加了 叶子节点和支节点的双向指针机制，进一步对范围查询优化如： <code>like</code>  <code>&gt;</code> <code>&lt;</code> 等语句。</p>
<p>目前版本数据库使用<strong>b*树</strong> </p>
<p>:::</p>
<h2 id="4-Btree索引功能上的分类"><a href="#4-Btree索引功能上的分类" class="headerlink" title="4. Btree索引功能上的分类"></a>4. Btree索引功能上的分类</h2><br>

<br>

<br>

<h3 id="4-1辅助索引-（二级索引）"><a href="#4-1辅助索引-（二级索引）" class="headerlink" title="4.1辅助索引 （二级索引）"></a>4.1辅助索引 （二级索引）</h3><br>



<p>(1) 提取索引列的所有值,进行排序</p>
<p>(2) 将排好序的值,均匀的存放在叶子节点,  进一步生成枝节点和根节点</p>
<p>(3) 在叶子节点中的值,都会对应存储主键ID</p>
<br>

<br>

<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-11.png" srcset="/img/loading.gif" lazyload alt="day04-11.png"></p>
<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-12.png" srcset="/img/loading.gif" lazyload alt="day04-12.png"><br><br></p>
<br>

<p>这时如果书的页码不按顺序写页码是乱的，辅助索引会也会性能降低。</p>
<br>

<h3 id="4-2-聚集索引"><a href="#4-2-聚集索引" class="headerlink" title="4.2 聚集索引"></a>4.2 聚集索引</h3><br>



<p>(1) MySQL 会自动选择主键作为聚集索引列,没有主键会选择唯一键,如果都没有会生成隐藏的.主键</p>
<p>(2) MySQL进行存储数据时,会按照聚集索引列值得顺序,有序存储数据行</p>
<p>(3) 聚集索引直接将原表数据页,作为叶子节点,然后提取聚集索引列向上生成枝和根</p>
<br>

<p>:::tip 聚集索引</p>
<p><strong>聚集索引一般是主键列</strong> ，创建表的时候创建主键。比如写书时就已经框定了页码 、章节的书写顺序规则，这样有顺序找页码的时候就更加好找。</p>
<p>在用户输入数据时，按照<strong>主键的顺序</strong>在磁盘上规划和存储数据行。</p>
<p><strong>聚集索引是自动维护的，数据在写入的时候就已经有序了</strong></p>
<p><strong>聚集索引</strong> 直接将整行数据按照顺序存储到了叶子节点当中，上层节点依旧取下层节点的最小值。</p>
<p>:::</p>
<h3 id="4-3-聚集索引和辅助索引共同使用"><a href="#4-3-聚集索引和辅助索引共同使用" class="headerlink" title="4.3 聚集索引和辅助索引共同使用"></a>4.3 聚集索引和辅助索引共同使用</h3><br>

<p>:::tip 例如：查询一个 name列 张三 的流程：</p>
<p>1.管理员设置 name 列为索引</p>
<p>2.数据库自动将系列值取出来</p>
<p>3.将排好序的值,均匀的存放在叶子节点</p>
<p>4.进一步生成枝节点和根节点</p>
<p>5.在叶子节点中的值,都会对应存储主键ID</p>
<p>6.MySQL 会自动选择主键作为聚集索引列,没有主键会选择唯一键,如果都没有会生成隐藏的主键</p>
<p>7.聚集索引直接将原表数据页,作为叶子节点,然后提取聚集索引列向上生成枝和根</p>
<p>8.聚集索引中遍历对应的存储主键ID</p>
<p>9.找到包含张三的数据行输出</p>
<p>:::</p>
<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-13.png" srcset="/img/loading.gif" lazyload alt="day04-13.png"></p>
<h3 id="4-4-聚集索引和辅助索引的区别"><a href="#4-4-聚集索引和辅助索引的区别" class="headerlink" title="4.4 聚集索引和辅助索引的区别"></a><strong>4.4</strong> <strong>聚集索引和辅助索引的区别</strong></h3><br>



<p><strong>辅助索引是自己创建的</strong> <strong>where name</strong>  有序值、ID的主键值</p>
<p><strong>聚集索引是自动生成的</strong>  <strong>where id</strong> ID</p>
<br>



<ul>
<li><p> 表中任何一个列都可以创建辅助索引,在你有需要的时候可以有多个辅助索引,只要名字不同即可</p>
</li>
<li><p> 在一张表中,聚集索引只能有一个,一般是主键</p>
</li>
<li><p>辅助索引,叶子节点只存储索引列的有序值+聚集索（ID的主键值）引列值</p>
</li>
<li><p>聚集索引,叶子节点存储的是有序的整行数据.</p>
</li>
<li><p>MySQL 的表数据存储是聚集索引组织表</p>
</li>
</ul>
<h2 id="5-辅助索引细分"><a href="#5-辅助索引细分" class="headerlink" title="5. 辅助索引细分"></a><strong>5.</strong> <strong>辅助索引细分</strong></h2><br>

<p>单列辅助索引 随便选一列</p>
<p>联合索引(覆盖索引) </p>
<p>唯一索引 索引列的值都是唯一的</p>
<br>

<h2 id="6-索引树高度"><a href="#6-索引树高度" class="headerlink" title="6. 索引树高度"></a><strong>6.</strong> <strong>索引树高度</strong></h2><br>

<p>索引树高度应当越低越好,一般维持在3-4最佳</p>
<p>:::tip 影响索引树高度的因素：</p>
<p>数据行数较多： 解决方法 分表 : parttion 用的比较少了（分片,分布式架构）</p>
<p>字段长度：解决方法 业务允许,尽量选择字符长度短的列作为索引列；业务不允许,采用前缀索引</p>
<p>数据类型： <code>char</code> 和 <code>varchar</code>  <code>char</code>比<code>varchar</code> 叶子节点消耗大，使用enum  作为索引列 （类似 12345） 索引树更简洁扫描起来更高效。</p>
<p>:::</p>
<p>​         </p>
<h2 id="7-索引的命令操作"><a href="#7-索引的命令操作" class="headerlink" title="7. 索引的命令操作"></a><strong>7.</strong> <strong>索引的命令操作</strong></h2> <br>

<h3 id="7-1-查询索引"><a href="#7-1-查询索引" class="headerlink" title="7.1 查询索引"></a>7.1 查询索引</h3> <br>

<p>PRI  主键索引 聚集索引 </p>
<p>MUL   辅助索引</p>
<p>UNI  唯一索引</p>
<br>

<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-14.png" srcset="/img/loading.gif" lazyload alt="day04-14.png"><br><br></p>
<p>查看索引信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">show</span> index <span class="hljs-keyword">from</span> city\G <br></code></pre></td></tr></table></figure>


<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-15.png" srcset="/img/loading.gif" lazyload alt="day04-15.png"></p>
<br>

<h3 id="7-2-创建索引"><a href="#7-2-创建索引" class="headerlink" title="7.2 创建索引"></a><strong>7.2 创建索引</strong></h3><br>

<p><strong>单列的辅助索引:</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> city <span class="hljs-keyword">add</span> index idx_name(name);  <span class="hljs-comment">--（DDL操作 锁表）</span><br></code></pre></td></tr></table></figure>

<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-16.png" srcset="/img/loading.gif" lazyload alt="day04-16.png"><br><br></p>
<p><strong>多列的联合索引:</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> city <span class="hljs-keyword">add</span> index idx_c_p(countrycode,population);<br></code></pre></td></tr></table></figure>

<br>

<p><strong>唯一索引:</strong> </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> city <span class="hljs-keyword">add</span> <span class="hljs-keyword">unique</span> index uidx_dis(district);<br></code></pre></td></tr></table></figure>

<br>

<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-17.png" srcset="/img/loading.gif" lazyload alt="day04-17.png"><br>:::  danger 有重复报错<br>唯一索引数据行中不能有重复<br>:::</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">去除重复<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(district) <span class="hljs-keyword">from</span> city;<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-keyword">distinct</span> district) <span class="hljs-keyword">from</span> city;<br></code></pre></td></tr></table></figure>

<br>

<p><strong>前缀索引</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">只能建在 字符串列<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> city <span class="hljs-keyword">add</span> index idx_dis(district(<span class="hljs-number">5</span>)); <span class="hljs-comment">--只取前五个字符</span><br></code></pre></td></tr></table></figure>

<br>

<h3 id="7-3-删除索引"><a href="#7-3-删除索引" class="headerlink" title="7.3 删除索引"></a>7.3 删除索引</h3><br>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">show</span> index <span class="hljs-keyword">from</span> city<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> city <span class="hljs-keyword">drop</span> index idx_name;<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> city <span class="hljs-keyword">drop</span> index idx_c_p;<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> city <span class="hljs-keyword">drop</span> index idx_dis;<br></code></pre></td></tr></table></figure>

<br>



<h2 id="8-索引压力测试-（对比索引前后效果）"><a href="#8-索引压力测试-（对比索引前后效果）" class="headerlink" title="8. 索引压力测试 （对比索引前后效果）"></a><strong>8.</strong> 索引压力测试 （对比索引前后效果）</h2><br>

<p>压力测试准备：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> use test <span class="hljs-comment">--导入数据</span><br><br>mysql<span class="hljs-operator">&gt;</span> source <span class="hljs-operator">/</span>tmp<span class="hljs-operator">/</span>t100w.sql<br><br><span class="hljs-keyword">select</span> count（<span class="hljs-operator">*</span>） <span class="hljs-keyword">from</span> t100w； <span class="hljs-comment">--查询数据行数量</span><br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t100w limit <span class="hljs-number">10</span>；<span class="hljs-comment">--查询前10行数据</span><br></code></pre></td></tr></table></figure>

<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-18.png" srcset="/img/loading.gif" lazyload alt="day04-18.png"></p>
<br>

<br>

<h3 id="8-1-未做优化之前测试"><a href="#8-1-未做优化之前测试" class="headerlink" title="8.1 未做优化之前测试"></a>8.1 未做优化之前测试</h3><br>

<p>模拟<strong>100个用户</strong>进行了<strong>2000次查询</strong></p>
<p>选k2列中的一个数据进行查询。</p>
<p><strong>测试命令</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqlslap --defaults-file=/etc/my.cnf \<br>--concurrency=100 --iterations=1 --create-schema=<span class="hljs-string">&#x27;test&#x27;</span> \<br>--query=<span class="hljs-string">&quot;select * from test.t100w where k2=&#x27;MN89&#x27;&quot;</span> engine=innodb \<br>--number-of-queries=2000 -uroot -p123 -verbose<br></code></pre></td></tr></table></figure>

<br>

<br>

<p><strong>未设置索引测试结果：755.861 秒</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@db01 ~]<span class="hljs-comment"># mysqlslap --defaults-file=/etc/my.cnf \</span><br>&gt; --concurrency=100 --iterations=1 --create-schema=<span class="hljs-string">&#x27;test&#x27;</span> \<br>&gt; --query=<span class="hljs-string">&quot;select * from test.t100w where k2=&#x27;MN89&#x27;&quot;</span> engine=innodb \<br>&gt; --number-of-queries=2000 -uroot -p123 -verbose<br>mysqlslap: [Warning] Using a password on the <span class="hljs-built_in">command</span> line interface can be insecure.<br>Benchmark<br>Running <span class="hljs-keyword">for</span> engine rbose<br>Average number of seconds to run all queries: 755.861 seconds<br>Minimum number of seconds to run all queries: 755.861 seconds<br>Maximum number of seconds to run all queries: 755.861 seconds<br>Number of clients running queries: 100<br>Average number of queries per client: 20<br></code></pre></td></tr></table></figure>



<h3 id="8-2索引优化后"><a href="#8-2索引优化后" class="headerlink" title="8.2索引优化后"></a>8.2索引优化后</h3><br>

<p><strong>创建辅助索引</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> t100w <span class="hljs-keyword">add</span> index idx_k2(k2)<br></code></pre></td></tr></table></figure>

<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-19.png" srcset="/img/loading.gif" lazyload alt="day04-19.png"></p>
<br>

<br>

<p><strong>未设置索引测试结果：1.678 秒</strong>  相差700倍</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@db01 ~]<span class="hljs-comment"># mysqlslap --defaults-file=/etc/my.cnf \</span><br>&gt; --concurrency=100 --iterations=1 --create-schema=<span class="hljs-string">&#x27;test&#x27;</span> \<br>&gt; --query=<span class="hljs-string">&quot;select * from test.t100w where k2=&#x27;MN89&#x27;&quot;</span> engine=innodb \<br>&gt; --number-of-queries=2000 -uroot -p123 -verbose<br>mysqlslap: [Warning] Using a password on the <span class="hljs-built_in">command</span> line interface can be insecure.<br>Benchmark<br>Running <span class="hljs-keyword">for</span> engine rbose<br>Average number of seconds to run all queries: 1.678 seconds<br>Minimum number of seconds to run all queries: 1.678 seconds<br>Maximum number of seconds to run all queries: 1.678 seconds<br>Number of clients running queries: 100<br>Average number of queries per client: 20<br></code></pre></td></tr></table></figure>

<br>

<h2 id="9-执行计划分析"><a href="#9-执行计划分析" class="headerlink" title="9. 执行计划分析"></a><strong>9.</strong> <strong>执行计划分析</strong></h2><br>

<h3 id="9-1-执行计划的作用"><a href="#9-1-执行计划的作用" class="headerlink" title="9.1 执行计划的作用"></a><strong>9.1</strong> <strong>执行计划的作用</strong></h3><br>

<p>将优化器 选择后的执行计划 截取出来.便于管理管理员判断语句得执行效率。</p>
<br>



<h3 id="9-2-获取执行"><a href="#9-2-获取执行" class="headerlink" title="9.2 获取执行"></a><strong>9.2</strong> <strong>获取执行</strong></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">desc</span>  <span class="hljs-comment">--SQL语句</span><br>explain <span class="hljs-comment">--SQL 语句</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> test.t100w <span class="hljs-keyword">where</span> k2<span class="hljs-operator">=</span><span class="hljs-string">&#x27;MN89&#x27;</span>; <span class="hljs-comment">--获取语句的计划</span><br></code></pre></td></tr></table></figure>



<p>获取语句的计划：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> test.t100w <span class="hljs-keyword">where</span> k2<span class="hljs-operator">=</span><span class="hljs-string">&#x27;MN89&#x27;</span>; <span class="hljs-comment">--获取语句的计划</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------------+------+---------------+------+---------+------+---------+----------+-------------+</span><br><span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> select_type <span class="hljs-operator">|</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">|</span> partitions <span class="hljs-operator">|</span> type <span class="hljs-operator">|</span> possible_keys <span class="hljs-operator">|</span> key <span class="hljs-operator">|</span> key_len <span class="hljs-operator">|</span> <span class="hljs-keyword">ref</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">rows</span>  <span class="hljs-operator">|</span> filtered <span class="hljs-operator">|</span> Extra    <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------------+------+---------------+------+---------+------+---------+----------+-------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1</span> <span class="hljs-operator">|</span> SIMPLE   <span class="hljs-operator">|</span> t100w <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>    <span class="hljs-operator">|</span> <span class="hljs-keyword">ALL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>     <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-number">1027638</span> <span class="hljs-operator">|</span>  <span class="hljs-number">10.00</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">Using</span> <span class="hljs-keyword">where</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------------+------+---------------+------+---------+------+---------+----------+-------------+</span><br></code></pre></td></tr></table></figure>

<br>

<h3 id="9-3-分析执行计划"><a href="#9-3-分析执行计划" class="headerlink" title="9.3 分析执行计划"></a><strong>9.3</strong> <strong>分析执行计划</strong></h3><h4 id="9-3-1-table-列"><a href="#9-3-1-table-列" class="headerlink" title="9.3.1 table 列"></a><strong>9.3.1 table</strong> 列</h4><p>table 表名  </p>
<h4 id="9-3-2-type列"><a href="#9-3-2-type列" class="headerlink" title="9.3.2 type列"></a><strong>9.3.2 type</strong>列</h4><p>查询的类型:</p>
<p>全表扫描  : ALL<br>索引扫描 级别 : index,range,ref,eq_ref,const(system),NULL  <strong>从左到右性能越好</strong>。</p>
 <br>

<br>

<p><strong>索引扫描级别分类说明：</strong></p>
<p><strong>index:</strong> <strong>全索引扫描</strong> ，需要遍历整个索引树才能获取到数据 ,<strong>性能比全表扫描ALL好</strong>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> countrycode <span class="hljs-keyword">from</span> city;<br></code></pre></td></tr></table></figure>

<br>
<br>

<p><strong>range:</strong> <strong>索引范围扫描</strong>  <code>&gt; &lt; &gt;= &lt;= , between and ,or,in,like</code>  （<strong>范围查询</strong>）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> id<span class="hljs-operator">&gt;</span><span class="hljs-number">2000</span>;<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> countrycode <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;CH%&#x27;</span>;<br></code></pre></td></tr></table></figure>

<br>

<p><strong>B树 对连续数据查询有优化，可以享受到B树 叶子节点双向指针的优化 。</strong> </p>
<p>所以 <code>or in range</code>性能 比 <code>&gt; &lt; &gt;= &lt;= , between and like </code>要低</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> countrycode<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CHN&#x27;</span> <span class="hljs-keyword">or</span> countrycode<span class="hljs-operator">=</span><span class="hljs-string">&#x27;USA&#x27;</span>;<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> countrycode <span class="hljs-keyword">in</span> (<span class="hljs-string">&#x27;CHN&#x27;</span>,<span class="hljs-string">&#x27;USA&#x27;</span>);<br></code></pre></td></tr></table></figure>

<br>

<p><strong>对于辅助索引来讲,<code>!=</code>（不等于） 和<code>not in</code>等语句是不走索引的</strong></p>
<p><strong>对于主键索引列来讲,<code>!=</code> 和<code>not in</code>等语句是走 range索引</strong></p>
<p><strong><code>in or</code> 一般改写为 <code>union all</code>  进行语句优化：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span>  <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> countrycode<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CHN&#x27;</span> <span class="hljs-keyword">or</span> countrycode<span class="hljs-operator">=</span><span class="hljs-string">&#x27;USA&#x27;</span>;<span class="hljs-comment">--改写为：</span><br><span class="hljs-keyword">desc</span> <br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> countrycode<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CHN&#x27;</span> <br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span> <br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> countrycode<span class="hljs-operator">=</span><span class="hljs-string">&#x27;USA&#x27;</span>;<br></code></pre></td></tr></table></figure>

<br>

<br>

<p><strong>ref: 辅助索引等值查询</strong></p>
<p><code>in or</code>  改写后的  <code>union all</code>  语句 变成了等值查询 ref 。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">desc</span> <br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> countrycode<span class="hljs-operator">=</span><span class="hljs-string">&#x27;CHN&#x27;</span> <br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span> <br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> countrycode<span class="hljs-operator">=</span><span class="hljs-string">&#x27;USA&#x27;</span>;<br></code></pre></td></tr></table></figure>

<br>
<br>

<p><strong>eq_ref : 多表连接时,子表使用主键列或唯一列作为连接条件</strong></p>
<p>A join B   时 <strong>B就是子表</strong></p>
<p>on a.x = B.y   <strong>B.y 列是主键或唯一键时 走eq_ref</strong></p>
<p>::: tip 优化多表连接要求</p>
<p>在优化多表连接查询时，第一保证驱动表（左边）的数据量级是最小的因为它不能走索引，它是全表数据和别的表进行对比第二张表开始可以走索引。</p>
<p>建议被连接的表它的连接列<code>on</code> 的条件<code>B.y</code>最好是主键或唯一键，实在不行是辅助索引。</p>
<p>在表的设计阶段就应该设计好的。</p>
<p>:::</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> b.name,a.name ,a.population <br><span class="hljs-keyword">from</span> city <span class="hljs-keyword">as</span> a <br><span class="hljs-keyword">join</span> country <span class="hljs-keyword">as</span> b <br><span class="hljs-keyword">on</span> a.countrycode<span class="hljs-operator">=</span>b.code <br><span class="hljs-keyword">where</span> a.population<span class="hljs-operator">&lt;</span><span class="hljs-number">100</span>;<br></code></pre></td></tr></table></figure>

<p><br>city 是条件列</p>
<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-20.png" srcset="/img/loading.gif" lazyload alt="day04-20.png"></p>
<br>

<br>

<p><strong>const(system) : 主键或者唯一键的等值查询</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">desc</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> city <span class="hljs-keyword">where</span> id<span class="hljs-operator">=</span><span class="hljs-number">100</span>;<br></code></pre></td></tr></table></figure>



<br>

<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-21.png" srcset="/img/loading.gif" lazyload alt="day04-21.png"></p>
<br>

<p><strong>NULL 性能最高因为没有这个数据行查不到。</strong></p>
<p><img src="https://xin997.oss-cn-beijing.aliyuncs.com/xinblogs/webimg-DBA/day04-22.png" srcset="/img/loading.gif" lazyload alt="day04-22.png"></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/DBA/">DBA</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/DBA/">DBA</a>
                    
                      <a class="hover-with-bg" href="/tags/RDBMS/">RDBMS</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/07/15/dba05-2/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">InnoDB 核心特性</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/07/15/dba04/">
                        <span class="hidden-mobile">第三章回顾 补充元数据查询部分</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
    
<a href="https://hexo.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-github-fill"></i></a> <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-weibo-fill"></i></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        京ICP备19033045号-1
      </a>
    </span>
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
